{% extends 'base.html' %}

{% block title %}Lip-synced Video Result{% endblock %}

{% block content %}
<div class="result">
    <div class="container">
        <div class="row">
            <div class="col-1"></div>
            <div class="col-10">
                <div>
                    <h2 style="margin-bottom: 20px;">Your Lip-synced Video</h2>
                    <video width="520" height="450" controls>
                        <!-- Use the dynamically passed video filename -->
                        <source src="{{ url_for('static', filename='output.mp4') }}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <div style="margin-top: 40px; display: flex; gap: 15px;">
                        <a href="{{ url_for('lipsyncing') }}" class="btn btn-primary">Back to Lip-syncing</a>
                        <a href="{{ url_for('static', filename='output.mp4') }}" download class="btn btn-primary" id="downloadBtn">Download Video</a>
                    </div>
                </div>
            </div>
            <div class="col-1"></div>
        </div>
    </div>
</div>

<script>
    document.getElementById('downloadBtn').addEventListener('click', function (event) {
        alert('Your video is downloading...');
        setTimeout(function () {
            window.location.href = '{{ url_for('feedback') }}'; // Redirect to feedback page
        }, 3000); // Give the browser time to download before redirecting
    });
</script>

{% endblock %}
